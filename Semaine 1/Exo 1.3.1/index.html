<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link
      href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/united/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-WTtvlZJeRyCiKUtbQ88X1x9uHmKi0eHCbQ8irbzqSLkE0DpAZuixT5yFvgX0CjIu"
      crossorigin="anonymous"
    />
    <title>Exercice 1.3.1 : Réaliser un chiffrement de César</title>
  </head>
  <body>
    <p>
      Écrire une fonction qui chiffre un texte en paramètre étant donné une clé
      de décalage.
    </p>

    <button id="bouton" class="btn btn-primary">Action</button>

    <script type="text/javascript">
      const abc = [
        "a",
        "b",
        "c",
        "d",
        "e",
        "f",
        "g",
        "h",
        "i",
        "j",
        "k",
        "l",
        "m",
        "n",
        "o",
        "p",
        "q",
        "r",
        "s",
        "t",
        "u",
        "v",
        "w",
        "x",
        "y",
        "z",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "0",
        "à",
        "é",
        "è",
        "ç",
        ".",
        "?",
        "!",
        ";",
        ":",
        "+",
        "-",
        "=",
        " "
      ];
      let stringAEncrypter = " texte à crypter";
      let key = 3;
      let stringCryptee = [];
      console.log(stringCryptee + " " + key);
      const chiffreCesar = () => {
        while (key > abc.length) {
          key = key - abc.length;
        }
        stringAEncrypter = stringAEncrypter.toLowerCase();
        console.log(stringAEncrypter);
        stringAEncrypter = stringAEncrypter.split("");
        console.log(stringAEncrypter);
        for (i = 0; i < stringAEncrypter.length; i++) {
          for (j = 0; j < abc.length; j++) {
            if (stringAEncrypter[i] == abc[j] && key + j <= abc.length) {
              stringCryptee.push(abc[key + j]);
            }
            if (stringAEncrypter[i] == abc[j] && key + j > abc.length)
              stringCryptee.push(abc[key + j - abc.length]);
          }
        }
        console.log(stringCryptee);
        stringCryptee = stringCryptee.join("");
        alert(`Votre texte crypté devient : ${stringCryptee}`);
      };

      const bouton = (document.getElementById("bouton").onclick = chiffreCesar);
    </script>
  </body>
</html>
